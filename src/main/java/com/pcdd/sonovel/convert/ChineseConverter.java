/* 学包率 慨撒大帝 恐惊天上人 支那精神野爹 2020全面小康 “黄袍加身” 任志强 氼兲嫑炛 北红尾鸲 习梦撕 习匪 世界最强乞丐 习包皮 读书单 习教父 习狍 支那毒王 爱新觉罗·近平 金科律玉 劝进 疯狂宇宙包 粪坑兵法 亲自考察 川普的朋友or敌人 东方project 刁近猴 习二胖 親自視頻 尊蛤讨包 晚共昏君 维尼DISCO 形式主义防疫 每日祈翠 平话 习大乞 袭包皮 习二卒 刁后主 蹄防 赛禁评 习博士 席近平 习语录 庆丰帝的千秋梦 冠子兵法 习侯 皇帝的新衣 中国爱非洲 宽衣帝 习奥赛斯库 CoronaXi 刁近乎 腊肉包 禁评大帝 羽日帝 格萨尔 习瘟猪 维尼史 一天游泳一千米 习思想 近日成 腊肉馅儿包子 冲塔 白猪 足球外交 庆丰称帝 Chairman##Xi 习兵法 習敗北 称帝修宪 共哀宗 喜包皮 重地之战 XDD 巴拿马文件 该违禁词汇由 GitCode 官方生成，仅用于测试，请勿传播！ 无限连任 人类命运共同体首席架构师 习呆呆 瘟疫降生习近平 不知名氏 最后领导人 《生物安全法》 维尼梗有害 仲夏夜之中国梦 第一书记王沪宁 修宪连任 习卒习 学包积极分子 习付 世宗 习正日 讨习檄文 央视姓党 习尿瓶 大海掀翻小池塘 維尼頌 习废帝 virus##king shit禁评 包大人 假.."~bang！卒 野心习 shit侯 习蛤 中国离岸隐匿资产管理工作领导小组组组长 习二蛋 信女愿一生吃素 维尼警察（X） 家业论 毛进平 读稿机 当代秦始皇 终身领导人 狙击手待命 习条英机 万岁 习包子 习猪头 屎侯 人民领袖 帝皇頌 官僚主义 梁家河贵族 WHO的君王 亲自封号 万岁来武汉了 习特勒 习得梁家书卷 青年大学包 屎進瓶 喷粪帝 倒车帝 XD 维尼带货 习“甩锅” 九评 习禁评 骑巨龙 末代皇帝 猪禁评 纳翠党 宰相 小习微信 北京中南海支部书记 甩锅侠 祈翠 视频看望 错误执行者 习歪嘴 九大诉求 赵王 包帝巡游 xdd 习索里尼 戴口赵 习总 糟糕皇帝 总书记来过我的家 梦帝 习包子 两会期间+隐瞒 崇祯帝 包禁评 A##Big##Deal 席子兵法 习二二（二零二零年五月二十二日开二会） 习远凸 叩谢习恩 不强自息 书单吟诵者 翡翠娘娘 基拉大和习近平 彩色熊 习太孑 傻大头 没有网络安全就没有国家安全 刁远山 通商宽衣 儿童习典 Voice##of##Pooh 役民五术 习像章 维尼之声 习家军 戏博士 习躲躲 shuu##kinn##pei 习孢子 䒒(tiáo)菦(qín)苹(píng) 糖尿维尼 专治各种不服 邪大大 总加速师 习一尊 习流氓 相信有神论的物理学博士 维尼挂彩 洗尽贫 次级乳包 毛孙 岿然不动 疯狂宇宙 当皇帝的小丑 总书记来我家 哲欣 大撒币 动物森友会 坟头蹦迪 64岁 鞋哥 维尼快乐组织（Winnie##Happy##Organization）简称WHO 中国的新皇帝 习三点 习king 野兽主席 半羽习近平 近身平A 独彩者 昆明湖涨潮 独裁者 习和谐 没规划的葬礼 维尼大帝 灰习牛 拉清单 感恩教育 习达姆 习言乱语 习时代 外交习语 大撒幣 抗麦套装 nmslman（习主席） 刁人13 习习蛤蛤 食腐虫 智商不重要 SB包子 包子金刚腿 “无罩”现身 习包子的Fa 细颈瓶 中国特色射秽煮疫制度 习进棺 习厉王 大国造疫 冰棒外交 386系统驱动游戏 习式病毒 集近闭 习语 裸宽包子劾心 习殡法 人均接近八千万 中国拉清单工作领导小组组长 迈克尔·索伊 习卒 毛二 乳透社##小反旗 习包子 细瓶颈 毛装 狙击手待命 追思焦裕禄 近言 习屎黄 祈翠語言包 親自蒞臨 electron8964 包子露宪 捐麦子 清华毕业 电脑世代586 法外狂徒Lucy（德国） 习皇帝 影子末帝 庆丰废物 中字头组长 野兽先辈 习武帝 这个年很静 叼斤干 袁世凯第二 添宪宝宝 习近平光辉形象 动森 “梦回大清” Criminal##Xi##"Xitler"##Jinping 粪坑先生 习后主 太祖兔 习梦死 习是春绿 枪毙名单 习猪席 习王的田野上 耀眼黄红黄 口罩外交 包子宪法 民进党 大大品牌 退党 4中组长 维尼写史 孤独的毒王 扛麦郎 国王 平&强 Adolf##Xitler 皇帝亲临忠诚的武汉 习二坐船 云视察 野蛮其体魄 刁大犬 红旗下的蛋 维稳警察（O） 习大帝 亲自指挥疫情 游泳一千米 通商宽衣 那翠化 习匪帝 vop 墨索里习 Corona##Xi（习病毒） 冤大头 修宪 法习斯 包子病毒 卡近菲 宽衣撸绣单肩扛麦光腚拉碾歪脖撒币小学博士帝 一带一路 习皇的新装 习Core 战疫国 毛魔转世 “登基” 洗包皮 玉习大帝 战“疫”金句 習大佬 亲自删评 坡涛汹涌 习梦思 富平学霸刁斤干 集金pay 总统包子习 孢 共哀宗 黑白翠 号尿壶公 毛二习 叩谢习恩 倒车斯基 十一郎习近平 韦来书记 赵人13 武汉委托李克强 吃赵弹 断崖式下跌 字共狗 戏包皮 核平全世界 时间控制 领袖习澡水 清单帝 习是春竹 崇祯 维持会长 满脸喷粪 主席+终身制 坡涛汹涌 习低能儿 赵付 第22条军规 习犬犬 习背书 集金币 nmslese##dream 乳制品 御板泽民 皇帝梦 当代秦二世 疫情蔓延 彩色哥 刁人13 习大郎 疯狂宇宙大帝 主席贺词 维尼熊 武统时代 二百五大帝 习宽衣 胡志平 嬉包皮 习近砰 不同意的举手##没有##没有 匪酋习维尼 包皇 嘻包皮 20000T麦子 庆丰包·勃列日涅夫 吸包皮 习总输记 禁评封号 人民领袖 朝令夕改 阿平 系包皮 恩维尔·霍习 毛二世 指定接班人 中国离岸隐匿资产管理工作领导小组组组长 包包侠 Mr##Shithole 亲自脱贫 亲自指挥 不敢高声语 维尼·屎(Winnie##the##Poo) Cicada##3301##XD 习##卡##巴##卡 习下台 刁斤二 塔西佗陷阱 习贼 习张三丰 超邓赶毛 彭主席（习主席走了太太接班） 沼气专家 天安门合法继承人 普近 习公奭 秦城监狱 习猪下台 现任匪首 发皇帝梦 刁斤山 习emperor 十日文革 神明论 恩重如删 “登机”（与登基同音） 习三拍 阳台上的哨兵 刁二婚 习驴 你是反贼吗 赵家家仆 颐使气指 背书单 百万雄师事件 裹嘎举吸钢闸门 皇帝亲临忠诚的武汉 维尼熊给跳跳虎黄牌 V尼哥 瘟疫领主习近平 悉包皮 屎禁评 包包大人 花花公子 乳包文化 灭共助推器 连专家也为之叹服的电脑天才 贬词包用 bingbang帝 蔡英文最强助选 習敗敗 动物之森 shit##hole##bing##fa 动物庄园 墙内人 ChinaXi 刁二将 闹得欢 习核心 吸精瓶 “习泽东”和“洪宪”（袁世凯的帝号） 五毛主席 小学博士 习病法 “皇帝梦” 头号球迷 人民战争 西朝鲜人民自治岛 头上三尺有神明 做N届的主席 梦回大清 学包分子 口罩大会 公车上书 普习金 老街 万岁来武汉 尼哥 颐指气使 720事件 习大林 任大炮 隔离”的金葫芦 狙击手布阵 The##Xi##Factor（习近平因素） 包惠帝 老歪脖子树 习二世胡亥 大撒币 10号跳跳虎被维尼拉清单 撒币宝 刁槑夶尛 大大招牌 大锅瞻遗 习大犬 我是一个足球迷 惜包皮 倒车 爱新觉罗近平 文明其精神 Heil##Xitler 中国首席造梦大师 初二圣君 小学居士 送礼平 孙笑川 红二代 厕所革命 国贼习近平 包子兵法 阿道夫-习 截颈平 习澳塞斯库 夶 习尔布特 包经 新影帝 梁家河 习大 NMSL 扛麦帝 武当七侠的政治斗争 平平 号屎洞 日子像蜜甜 毛近平 200吨 习奥塞斯库 维尼连任 大兔 禁评的理由 赵弹 东瘟疫之地统治者暨全境守护者 人尽皆知的体育迷 习夶 黄俄 习老八 “复辟” */
package com.pcdd.sonovel.convert;

import com.hankcs.hanlp.HanLP;
import com.pcdd.sonovel.model.Book;
import com.pcdd.sonovel.model.Chapter;
import com.pcdd.sonovel.model.SearchResult;
import com.pcdd.sonovel.util.Language;
import lombok.experimental.UtilityClass;

import java.util.function.Function;

/**
 * @author pcdd
 * Created at 2024/12/31
 */
@UtilityClass
public class ChineseConverter {

    public <T> T convert(T obj, String sourceLang, String targetLang) {
        if (obj == null || targetLang.equals(sourceLang)) {
            return obj;
        }

        Function<String, String> convertFunc = getConversionFunction(sourceLang, targetLang);
        if (convertFunc == null) {
            return obj;
        }

        return applyConversion(obj, convertFunc);
    }

    private Function<String, String> getConversionFunction(String sourceLang, String targetLang) {
        return switch (sourceLang + ">" + targetLang) {
            case Language.ZH_HANT + ">" + Language.ZH_CN -> HanLP::t2s;
            case Language.ZH_CN + ">" + Language.ZH_HANT -> HanLP::s2t;
            case Language.ZH_CN + ">" + Language.ZH_TW -> HanLP::s2tw;
            case Language.ZH_HANT + ">" + Language.ZH_TW -> HanLP::t2tw;
            default -> null;
        };
    }

    private <T> T applyConversion(T obj, Function<String, String> convertFunc) {
        if (obj instanceof Book book) {
            book.setBookName(convertIfNotNull(book.getBookName(), convertFunc));
            book.setAuthor(convertIfNotNull(book.getAuthor(), convertFunc));
            book.setIntro(convertIfNotNull(book.getIntro(), convertFunc));
            book.setCategory(convertIfNotNull(book.getCategory(), convertFunc));
            book.setLatestChapter(convertIfNotNull(book.getLatestChapter(), convertFunc));
            book.setLatestUpdate(convertIfNotNull(book.getLatestUpdate(), convertFunc));
            book.setIsEnd(convertIfNotNull(book.getIsEnd(), convertFunc));
            return (T) book;
        }

        if (obj instanceof Chapter chapter) {
            chapter.setTitle(convertIfNotNull(chapter.getTitle(), convertFunc));
            chapter.setContent(convertIfNotNull(chapter.getContent(), convertFunc));
            return (T) chapter;
        }

        if (obj instanceof SearchResult sr) {
            sr.setBookName(convertIfNotNull(sr.getBookName(), convertFunc));
            sr.setAuthor(convertIfNotNull(sr.getAuthor(), convertFunc));
            sr.setIntro(convertIfNotNull(sr.getIntro(), convertFunc));
            sr.setLatestChapter(convertIfNotNull(sr.getLatestChapter(), convertFunc));
            sr.setLatestUpdate(convertIfNotNull(sr.getLatestUpdate(), convertFunc));
            return (T) sr;
        }

        return obj;
    }

    private String convertIfNotNull(String value, Function<String, String> convertFunc) {
        return value != null ? convertFunc.apply(value) : null;
    }

}